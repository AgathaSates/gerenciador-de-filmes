import{a as U}from"./chunk-YTZZOMT2.js";import{Aa as F,B as y,Ba as R,C as M,D as n,G as w,M as c,N as s,O as b,P as g,U as l,V as o,W as T,Y as S,_,aa as r,ba as v,ca as u,ha as x,ia as E,ja as p,la as D,na as I,oa as L,t as f,va as $}from"./chunk-BQQJ7R74.js";var z=()=>[],h=(e,i)=>i.id;function O(e,i){e&1&&(l(0,"p",1),r(1,"Carregando detalhes\u2026"),o())}function j(e,i){if(e&1&&T(0,"img",5),e&2){_(2);let t=p(1);S("src",t.poster_path,y)("alt",t.title)}}function A(e,i){e&1&&(l(0,"div",6),r(1,"Sem poster"),o())}function k(e,i){if(e&1&&(l(0,"li")(1,"strong"),r(2,"Lan\xE7amento:"),o(),r(3),o()),e&2){_(2);let t=p(1);n(3),u(" ",t.release_date)}}function V(e,i){if(e&1&&(l(0,"li")(1,"strong"),r(2,"Dura\xE7\xE3o:"),o(),r(3),o()),e&2){_(2);let t=p(1);n(3),u(" ",t.runtime," min")}}function Y(e,i){e&1&&r(0," , ")}function q(e,i){if(e&1&&(r(0),c(1,Y,1,0)),e&2){let t=i.$implicit,a=i.$index,d=i.$count;u(" ",t.name," "),n(),s(a!==d-1?1:-1)}}function B(e,i){if(e&1&&(l(0,"li")(1,"strong"),r(2,"G\xEAneros:"),o(),b(3,q,2,2,null,null,h),o()),e&2){_(2);let t=p(1);n(3),g(t.genres)}}function G(e,i){if(e&1&&(l(0,"h5"),r(1,"Sinopse"),o(),l(2,"p",9),r(3),o()),e&2){_(2);let t=p(1);n(3),v(t.overview)}}function K(e,i){if(e&1&&T(0,"img",14),e&2){let t=_(2).$implicit;S("src",t.profile_path,y)("alt",t.name)}}function W(e,i){e&1&&(l(0,"div",15),r(1,"Sem foto"),o())}function H(e,i){if(e&1&&(l(0,"div",12)(1,"div",13),c(2,K,1,2,"img",14)(3,W,2,0,"div",15),l(4,"div",16),r(5),o(),l(6,"div",17),r(7),o()()()),e&2){let t=_().$implicit;n(2),s(t.profile_path?2:3),n(3),v(t.name),n(2),v(t.character)}}function J(e,i){if(e&1&&c(0,H,8,3,"div",12),e&2){let t=i.$index;s(t<12?0:-1)}}function Q(e,i){if(e&1&&(l(0,"h2",10),r(1,"Elenco principal"),o(),l(2,"div",11),b(3,J,1,1,null,null,h),o()),e&2){_();let t=p(22);n(3),g(t)}}function X(e,i){if(e&1&&(l(0,"div",20)(1,"strong"),r(2),o(),r(3),o()),e&2){let t=_().$implicit;n(2),u("",t.job,":"),n(),u(" ",t.name," ")}}function Z(e,i){if(e&1&&c(0,X,4,2,"div",20),e&2){let t=i.$index;s(t<12?0:-1)}}function ee(e,i){if(e&1&&(l(0,"h2",18),r(1,"Equipe t\xE9cnica"),o(),l(2,"div",19),b(3,Z,1,1,null,null,h),o()),e&2){_();let t=p(24);n(3),g(t)}}function te(e,i){if(e&1&&(l(0,"h2",21),r(1,"Trailer"),o(),l(2,"div",22),T(3,"iframe",23),o()),e&2){_();let t=p(26);n(3),S("src",t,M)}}function ie(e,i){if(e&1&&(l(0,"h1",2),r(1),o(),l(2,"div",3)(3,"div",4),c(4,j,1,2,"img",5)(5,A,2,0,"div",6),o(),l(6,"div",7)(7,"ul",8),c(8,k,4,1,"li"),c(9,V,4,1,"li"),c(10,B,5,0,"li"),l(11,"li")(12,"strong"),r(13,"Idioma original:"),o(),r(14),o(),l(15,"li")(16,"strong"),r(17,"Nota m\xE9dia:"),o(),r(18),l(19,"span"),r(20),o()()(),c(21,G,4,1),o()(),x(22),c(23,Q,5,0),x(24),c(25,ee,5,0),x(26),c(27,te,4,1)),e&2){let t=_(),a=p(1);n(),v(a.title),n(3),s(a.poster_path?4:5),n(4),s(a.release_date?8:-1),n(),s(a.runtime!==null?9:-1),n(),s(a.genres!=null&&a.genres.length?10:-1),n(4),u(" ",a.original_language),n(4),u(" ",a.vote_average," "),n(2),u("(",a.vote_count," votos)"),n(),s(a.overview?21:-1),n();let d=E((a.credits==null?null:a.credits.cast)??D(15,z));n(),s(d.length?23:-1),n();let C=E((a.credits==null?null:a.credits.crew)??D(16,z));n(),s(C.length?25:-1),n();let m=E(t.getSafeTrailerUrl(a));n(),s(m?27:-1)}}var P=class e{route=f(R);mediaService=f(U);sanitizer=f(F);movieDetails$;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");if(!i)throw new Error("Filme n\xE3o encontrado.");let t=Number(i);if(Number.isNaN(t))throw new Error("Id inv\xE1lido.");this.movieDetails$=this.mediaService.selectMovieDetails(t)}getSafeTrailerUrl(i){let t=i.videos?.results??[],a=(...m)=>m.map(N=>t.find(N)).find(Boolean)??null,d=a(m=>m.site==="YouTube"&&m.type==="Trailer"&&m.official)||a(m=>m.site==="YouTube"&&m.type==="Trailer")||a(m=>m.site==="YouTube");if(d&&d.site==="YouTube")return this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${d.key}?rel=0&modestbranding=1`);let C=t.find(m=>m.site==="Vimeo"&&m.type==="Trailer")??t.find(m=>m.site==="Vimeo");return C?this.sanitizer.bypassSecurityTrustResourceUrl(`https://player.vimeo.com/video/${C.key}`):null}selectTopCast(i,t=12){return[...i.credits?.cast??[]].sort((a,d)=>a.order-d.order).slice(0,t)}selectKeyCrew(i){let t=new Set(["Director","Screenplay","Writer","Story","Producer","Executive Producer","Director of Photography","Editor","Original Music Composer"]),a=new Map;for(let d of i.credits?.crew??[])t.has(d.job)&&!a.has(d.name+d.job)&&a.set(d.name+d.job,d);return Array.from(a.values())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["movie-details"]],decls:5,vars:4,consts:[[1,"container","py-4"],[1,"text-muted"],[1,"mb-3","text-center","pt-2","pb-4"],[1,"row","g-4"],[1,"col-12","col-md-4"],["loading","lazy",1,"img-fluid","rounded-4","shadow-sm",3,"src","alt"],[1,"border","rounded-4","p-5","text-center","text-muted"],[1,"col-12","col-md-8"],[1,"list-unstyled","mb-3","text-secondary","small"],[1,"mb-0"],[1,"mt-5","text-center","pt-2","pb-4"],[1,"row","g-3"],[1,"col-6","col-md-3","col-lg-2"],[1,"text-center"],["loading","lazy",1,"img-fluid","rounded-3","mb-2",3,"src","alt"],[1,"border","rounded-3","py-5","mb-2","text-muted"],[1,"fw-semibold","small"],[1,"small"],[1,"mt-4","text-center","pt-2","pb-4"],[1,"row","g-2"],[1,"col-12","col-md-6"],[1,"mt-4","text-center","pt-2","pb-2"],[1,"ratio","ratio-16x9","rounded-4","overflow-hidden","shadow-sm"],["title","Trailer","loading","lazy","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen","",3,"src"]],template:function(t,a){if(t&1&&(l(0,"div",0),x(1),I(2,"async"),c(3,O,2,0,"p",1)(4,ie,28,17),o()),t&2){n();let d=E(L(2,1,a.movieDetails$));n(2),s(d?4:3)}},dependencies:[$],encapsulation:2})};export{P as MovieDetails};
